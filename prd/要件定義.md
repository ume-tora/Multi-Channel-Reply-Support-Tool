# 要件定義書: Multi Channel Reply Support Tool

## 1. プロジェクト概要

### 1.1. プロジェクト名
Multi Channel Reply Support Tool

### 1.2. 背景
既存のGmail向け返信支援ツールの利便性を、Chatwork, Google Chatなど他のコミュニケーションツールにも拡大する。これにより、複数のチャネルを横断して発生する顧客対応業務の分断を解消する。

### 1.3. 目的
チャネルごとに異なるUIや操作方法に依存せず、統一されたインターフェースでAIによる返信案の作成、編集、送信を行えるChrome拡張機能を提供する。これにより、顧客対応業務の効率と品質を向上させることを目指す。

## 2. プロジェクトの目標

### 2.1. 定性的目標
- 複数チャネルの問い合わせ対応にかかる時間と心理的負担を軽減する。
- AIのサポートにより、一貫性のある高品質な返信を実現する。
- ミニマルかつ洗練されたUI/UXで、使っていて心地よい体験を提供する。

### 2.2. 定量的目標 (PoC段階)
- 主要3チャネル（Gmail, Chatwork, Google Chat）で安定して動作するプロトタイプを完成させる。
- 返信作成までの一連の操作ステップを、手動で行う場合に比べて50%以上削減する。

## 3. 対象ユーザー

### 3.1. ペルソナ1: カスタマーサポート担当者
- **業務内容:** 複数のチャネル（メール、チャット）から日々大量に寄せられる問い合わせに対応する。
- **課題:** 迅速かつ正確な返信が求められる。類似の問い合わせも多く、定型文の管理と利用に手間がかかっている。
- **ニーズ:** 返信文のドラフトを、文脈を考慮した上で素早く生成し、最小限の修正で送信したい。

### 3.2. ペルソナ2: 営業担当
- **業務内容:** 外出先や移動中など、PCだけでなくスマートフォンからも様々なツールで顧客と連絡を取る。
- **課題:** 時間や場所に制約がある中で、質の高いコミュニケーションを維持する必要がある。
- **ニーズ:** 状況に応じた丁寧かつ適切なトーンの返信を、場所を問わずに手早く作成したい。

## 4. 機能要件

### 4.1. F-01: 返信案生成ボタンの表示
- **内容:** 各対応チャネルのUI上で、ユーザーが返信を作成するアクションを起こす際に、自然な流れで利用できる最適な位置に「返信案生成ボタン」を表示する。
- **デザイン:** 各サービスのUIを阻害しない、ミニマルで直感的に機能が理解できるアイコンデザインとする。

### 4.2. F-02: 返信案の生成
- **内容:** 「返信案生成ボタン」をクリックすると、Gemini APIを呼び出して返信案を生成する。
- **コンテキスト:** 直前のメッセージだけでなく、可能な範囲で前後の会話の文脈情報を取得し、プロンプトに含めることで、より精度の高い返信案を生成する。
- **フィードバック:** 生成処理中は、ユーザーに処理中であることが視覚的にわかるローディング表示を行う。

### 4.3. F-03: 編集モーダル
- **内容:** 返信案生成後、内容の確認と編集を行うためのモーダルウィンドウを表示する。
- **構成要素:**
    - 生成された返信案が表示されるテキストエリア
    - 「送信」ボタン
    - 「再生成」ボタン
    - モーダルを閉じるための「キャンセル」または「×」ボタン

### 4.4. F-04: メッセージの送信
- **内容:** 編集モーダルの「送信」ボタンをクリックすると、編集されたテキストが各チャネルのメッセージ入力欄に自動で挿入される。
- **Note:** PoC段階では、入力欄への挿入までをスコープとする。最終的な送信アクションはユーザー自身が行うことで、誤送信のリスクを低減する。

### 4.5. F-05: 設定画面
- **内容:** Chrome拡張機能のポップアップやオプションページに設定画面を設ける。
- **設定項目:** ユーザーが自身のGemini APIキーを入力・保存できる欄を設ける。

## 5. 非機能要件

### 5.1. UI/UX
- **デザイン:** 全体を通して、ミニマル、シンプル、かつユーザーが積極的に「使いたくなる」ような洗練されたデザインを採用する。
- **操作性:** マニュアルを読まなくても直感的に操作できる、スムーズなユーザー体験を提供する。

### 5.2. パフォーマンス
- 返信案の生成リクエストから編集モーダルが表示されるまでの応答時間は、平均して3秒以内を目指す。

### 5.3. セキュリティ
- ユーザーが設定したAPIキーは、`chrome.storage.local` を使用してユーザーのローカル環境に安全に保存する。

### 5.4. 拡張性
- 将来的に新しいチャネル（例: Slack, Facebook Messenger）を追加することを想定し、チャネルごとの処理をモジュール化し、追加・変更が容易な構造で設計する。

### 5.5. 開発とドキュメント
- **技術スタック:** TypeScript, Manifest v3
- **ドキュメント:** 開発者が容易に環境構築と動作確認を行えるよう、GitHubリポジトリの `README.md` に詳細な手順を明記する。

## 6. 成果物
- ソースコード一式を含むGitHubリポジトリ
- 環境構築と動作手順を明記した `README.md`